(this["webpackJsonptvc-meme-generator"]=this["webpackJsonptvc-meme-generator"]||[]).push([[0],[,,,,,,,function(e,t,a){e.exports=a.p+"static/media/plus-circle.2b2138f3.svg"},,,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/undo-alt.5ee04a94.svg"},function(e,t,a){e.exports=a.p+"static/media/cog.8db53187.svg"},,function(e,t,a){e.exports=a(68)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(22),i=a.n(s),r=(a(31),a(6)),l=a(2),c=a(1),m=a(4),u=a(3);a(32),a(33);var d=function(e){return o.a.createElement("button",{onClick:e.onButtonClick,className:"button ".concat(e.classes)}," ",e.buttonIcon?o.a.createElement("img",{className:"icon",alt:"icon",src:e.buttonIcon}):"",e.buttonText)},h=a(7),p=a.n(h),g=a(23),f=a.n(g),v=a(8),b=a.n(v),C=a(11),M=(a(35),a(24)),x=a.n(M),E=(a(36),a(37),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).onClose=function(){e.props.onClose()},e.getAppropriateStyle=function(e){return e?{display:"block"}:{display:"none"}},e}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{id:"modal",className:"modal",style:this.getAppropriateStyle(this.props.showModal)},o.a.createElement("div",{className:"modal-content"},o.a.createElement("span",{className:"close",onClick:this.onClose},"\xd7"),o.a.createElement("div",null,this.props.children)))}}]),a}(o.a.Component)),w=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onColorHexInput=function(e){var t=Object(r.a)({},n.state.memeTextSettings);t.color=e.target.value,n.setState({memeTextSettings:t})},n.handleFontChange=function(e){var t=Object(r.a)({},n.state.memeTextSettings);t.fontFamily=e.target.value,n.setState({memeTextSettings:t})},n.getMemeTextSettings=function(){n.props.getMemeSettings(n.state.memeTextSettings)},n.onClose=function(){n.props.onClose()},n.state={memeTextSettings:{color:"#000000",fontFamily:"Impact"}},n}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement(E,{showModal:this.props.showModal,onClose:this.onClose},o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label",htmlFor:"hex-color"},"Color"),o.a.createElement("div",{className:"control"},o.a.createElement("input",{className:"input",type:"text",id:"hex-color-input",placeholder:"#ffffff",onKeyDown:this.onColorHexInput}))),o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label",htmlFor:"font-field"},"Font"),o.a.createElement("div",{className:"control"},o.a.createElement("select",{value:this.state.memeTextSettings.fontFamily,style:{fontFamily:this.state.memeTextSettings.fontFamily},onChange:this.handleFontChange,id:"fonts",name:"font"},o.a.createElement("option",{value:"Impact",style:{fontFamily:"Impact"}},"Impact"),o.a.createElement("option",{value:"Comic Sans MS",style:{fontFamily:"Comic Sans MS"}},"Comic Sans MS"),o.a.createElement("option",{value:"Helvetica",style:{fontFamily:"Helvetica"}},"Helvetica"),o.a.createElement("option",{value:"Times New Roman",style:{fontFamily:"Times New Roman"}},"Times New Roman"),o.a.createElement("option",{value:"Times",style:{fontFamily:"Times"}},"Times"),o.a.createElement("option",{value:"Courier New",style:{fontFamily:"Courier New"}},"Courier New"),o.a.createElement("option",{value:"Courier",style:{fontFamily:"Courier"}},"Courier"),o.a.createElement("option",{value:"Verdana",style:{fontFamily:"Verdana"}},"Verdana")))),o.a.createElement("div",{className:"save-settings-button-wrapper"},o.a.createElement(d,{buttonText:"Save Settings",className:"save-settings-button",onButtonClick:this.getMemeTextSettings,buttonIcon:p.a})))}}]),a}(o.a.Component),I=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onEnter=function(){var e=Object(C.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=7;break}return(a=Object(r.a)({},n.state.textData)).text=t.target.value,t.target.value=" ",e.next=6,n.setState({textData:a});case 6:n.props.onTextInput(n.state.textData);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showModal=function(e){return n.setState({showModal:!0})},n.getMemeSettings=function(e){n.onClose(),n.setState((function(t){return{textData:Object(r.a)(Object(r.a)({},t.textData),{},{settings:Object(r.a)({},e)})}}))},n.onClose=function(){return n.setState({showModal:!1})},n.state={showModal:!1,textData:{text:"",settings:{color:"#000000",fontFamily:"Impact"}}},n}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label",htmlFor:this.props.id},this.props.labelText),o.a.createElement("div",{className:"control"},o.a.createElement("input",{className:"input",type:"text",id:this.props.id,placeholder:this.props.placeholder,onKeyDown:this.onEnter}),o.a.createElement("div",{className:"form-controls",onClick:this.showModal},o.a.createElement("div",{className:"form-controls__settings"},o.a.createElement("img",{className:"icon mr-0",alt:"icon",src:x.a}))))),o.a.createElement(w,{showModal:this.state.showModal,getMemeSettings:this.getMemeSettings,onClose:this.onClose}))}}]),a}(o.a.Component);a(38);function S(){return o.a.createElement("header",{className:"app-header"},o.a.createElement("h1",null,o.a.createElement("span",{className:"underline-text"},"MEME",o.a.createElement("div",{className:"title-underline"}))," Generator"))}a(39),a(40);var T,y=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).memeSelectionImageStyle=function(e){return{backgroundImage:"url(".concat(e,")"),backgroundPosition:"center center",backgroundSize:"cover"}},e}return Object(c.a)(a,[{key:"onMemeSelection",value:function(e){this.props.onMemeSelection(e)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"meme-selection-image",style:this.memeSelectionImageStyle(this.props.meme.url),onClick:function(){return e.onMemeSelection(e.props.meme)}})}}]),a}(n.Component),O=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onMemeSelection=function(e){n.props.onMemeSelection(e)},n.state={memes:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.memes.then((function(t){var a=t.memes;e.setState({memes:a})}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("h4",null,"Popular"),o.a.createElement("div",{className:"meme-selection-container"},this.state.memes.map((function(t,a){return o.a.createElement(y,{key:a,meme:t,onMemeSelection:e.onMemeSelection})}))))}}]),a}(o.a.Component),j=(a(41),a(12)),k=a.n(j),N=a(12),A=function(){var e=Object(C.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("https://api.imgflip.com/get_memes").then((function(e){return{memes:e.data.data.memes.splice(0,10)}})).catch((function(e){return"Something went wrong: "+e}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=a(25),F=a(9),B=(a(67),{}),R=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getMemeDivWidth=function(e){return n.memeColRef.current.offsetWidth},n.getAppropriateCanvasHeight=function(e,t){return t/e*n.getMemeDivWidth()},n.addImageToMeme=function(e,t){var a=t.url;F.fabric.Image.fromURL(a,(function(t){e.add(t)})),n.props.onImageAddedToMeme()},n.saveImage=function(e){var t=document.createElement("a");t.href=e.toDataURL({format:"jpeg",quality:.8}),t.download="meme.png",t.click(),n.onImageSaved()},n.onImageSaved=function(){n.props.onImageDownloaded(!0)},n.loadCanvasData=function(e){e.loadFromJSON(B,(function(){e.renderAll()}))},n.state={memeTextObject:{}},n.memeColRef=o.a.createRef(),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){T=new F.fabric.Canvas("memeCanvas")}}]),Object(c.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this;console.log(this.state.memeTextObject),console.log(this.memeColRef.current.offsetWidth);var n=this.state.memeTextObject,o=this.props.imageToAddToMeme;this.loadCanvasData(T),this.props.memeBackgroundImage&&this.loadBackgroundImageToCanvas(T,this.props.memeBackgroundImage.url),""!==n.text&&e.memeTextObject.text!==this.state.memeTextObject.text&&this.addTextToCanvas(T,n),o&&this.addImageToMeme(T,o),this.saveCanvasData(T),this.props.downloadCanvas&&(this.setState({memeTextObject:{}}),this.props.onMemeTextClear(),this.saveImage(T),this.deleteCanvasObjects(T)),this.props.resetCanvas&&(this.deleteCanvasObjects(T),this.props.onCanvasReset()),T.on("mouse:out",(function(e){return a.handleMouseOut(e,T)}))}},{key:"saveCanvasData",value:function(e){B=JSON.stringify(e.toJSON())}},{key:"deleteCanvasObjects",value:function(e){B=JSON.stringify(e.remove.apply(e,Object(D.a)(e.getObjects())))}},{key:"handleMouseOut",value:function(e,t){B=this.saveCanvasData(t),t.renderAll()}},{key:"addTextToCanvas",value:function(e,t){console.log("Chaliraxa add text"),e.add(new F.fabric.Text(t.text,{fontFamily:t.settings.fontFamily,fill:t.settings.color,left:100,top:100}))}},{key:"loadBackgroundImageToCanvas",value:function(e,t){F.fabric.Image.fromURL(t,function(t){var a=this.getMemeDivWidth(),n=this.getAppropriateCanvasHeight(t.width,t.height);e.setHeight(n),e.setWidth(a),e.setBackgroundImage(t,e.renderAll.bind(e),{scaleX:e.width/t.width,scaleY:e.height/t.height})}.bind(this),{crossOrigin:"anonymous"})}},{key:"render",value:function(){return o.a.createElement("div",{ref:this.memeColRef},o.a.createElement("canvas",{id:"memeCanvas",style:{width:"100% !important",height:"auto"}}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a={};return e.memeTextObject!==t.memeTextObject&&(a.memeTextObject=e.memeTextObject),a}}]),a}(o.a.Component),U=a(10),H=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onClose=function(){n.props.onClose()},n.getAppropriateFormat=function(e,t){var a,n=e.name,o=URL.createObjectURL(e),s=2,i=new Image;i.src=o,i.onload=function(){s=this.width,a=this.height,t&&t({name:n,url:o,width:s,height:a})}},n.onImageChange=function(e){if(e.target.files&&e.target.files[0]){var t=e.target.files[0],a=Object(U.a)(n);n.getAppropriateFormat(t,(function(e){a.setState({image:e})}))}},n.clearImageUpload=function(e){n.imageUpload.current.value=""},n.addImage=function(e){n.props.image(n.state.image),n.props.onClose(),n.clearImageUpload()},n.state={image:null},n.imageUpload=o.a.createRef(),n}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement(E,{showModal:this.props.showModal,onClose:this.onClose},o.a.createElement("input",{type:"file",name:"myImage",ref:this.imageUpload,onChange:this.onImageChange}),o.a.createElement("div",{className:"save-settings-button-wrapper"},o.a.createElement(d,{buttonText:"Add Image",buttonIcon:p.a,onButtonClick:this.addImage})))}}]),a}(o.a.Component),W=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onMemeSelection=function(e){n.setState({currentMeme:e})},n.onTextInput=function(e){n.setState({textData:e})},n.getMemeSettings=function(e){console.log(e)},n.downloadMeme=function(){n.setState({downloadMeme:!0})},n.onImageDownloaded=function(e){n.setState({downloadMeme:!1})},n.onMemeTextClear=function(){var e=Object(r.a)({},n.state.textData);e.text="",n.setState({textData:e})},n.resetCanvas=function(){n.setState({resetCanvas:!0})},n.onCanvasReset=function(){n.onMemeTextClear(),n.setState({resetCanvas:!1})},n.onShowImageBgUploadModalClose=function(){n.setState({showImageBgUploadModal:!1})},n.onShowImageAddModalClose=function(){n.setState({showImageAddModal:!1})},n.addYourOwnImage=function(){n.setState({showImageBgUploadModal:!0})},n.addImageTomMeme=function(){n.setState({showImageAddModal:!0})},n.addImage=function(e){n.setState({imageToAddToMeme:e})},n.onImageAddedToMeme=function(e){n.setState({imageToAddToMeme:null})},n.state={currentMeme:null,textData:{text:"",settings:{color:"#000000",fontFamily:"Impact"}},downloadMeme:!1,resetCanvas:!1,showImageBgUploadModal:!1,showImageAddModal:!1,memeBackgroundImage:null,imageToAddToMeme:null},n}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"container"},o.a.createElement(S,null),o.a.createElement("section",{className:"meme-generator-section"},o.a.createElement("div",{className:"meme-grid"},o.a.createElement("div",{className:"col meme-col",ref:this.memeColRef},o.a.createElement(R,{memeBackgroundImage:this.state.currentMeme,memeTextObject:this.state.textData,downloadCanvas:this.state.downloadMeme,onImageDownloaded:this.onImageDownloaded,onMemeTextClear:this.onMemeTextClear,resetCanvas:this.state.resetCanvas,onCanvasReset:this.onCanvasReset,imageToAddToMeme:this.state.imageToAddToMeme,onImageAddedToMeme:this.onImageAddedToMeme})),o.a.createElement("div",{className:"col meme-creator-col"},o.a.createElement("div",{className:"button-group"},o.a.createElement(d,{buttonText:"Add Your Own Image",buttonIcon:p.a,onButtonClick:this.addYourOwnImage}),o.a.createElement(d,{buttonText:"Add Image to Your Meme",buttonIcon:p.a,onButtonClick:this.addImageTomMeme})),o.a.createElement("div",null,o.a.createElement(O,{memes:A.getAllMemes(k.a),onMemeSelection:this.onMemeSelection})),o.a.createElement("div",null,o.a.createElement("div",{className:"meme-text-input"},o.a.createElement(I,{label:"text",id:"memeText",labelText:"Text",placeholder:"Text",onTextInput:this.onTextInput}))),o.a.createElement("div",{className:"button-group create-meme-button-group"},o.a.createElement("div",{className:"reset-button-container"},o.a.createElement(d,{buttonText:"Reset",classes:"--black",buttonIcon:f.a,onButtonClick:this.resetCanvas})),o.a.createElement(d,{buttonText:"Generate Meme",buttonIcon:p.a,onButtonClick:this.downloadMeme})))))),o.a.createElement(H,{showModal:this.state.showImageBgUploadModal,onClose:this.onShowImageBgUploadModalClose,image:this.onMemeSelection}),o.a.createElement(H,{showModal:this.state.showImageAddModal,onClose:this.onShowImageAddModalClose,image:this.addImage}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[26,1,2]]]);
//# sourceMappingURL=main.e6451b58.chunk.js.map